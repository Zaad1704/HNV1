import{j as e,b as t}from"./index-7df8bb8f.js";import{r as i,a as s}from"./vendor-83d6deea.js";import{a,u as l,c as n}from"./query-c0dd8be7.js";import{m as c,q as o,af as r}from"./ui-88b07fc3.js";import"./router-225372b8.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";const d=({title:t,children:i})=>e.jsxs("div",{className:"app-surface rounded-3xl p-6 border border-app-border",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:t}),i]}),m=async()=>{const{data:e}=await t.get("/site-settings");return e.data||{}},x=async e=>{const{data:i}=await t.put("/site-settings",e);return i.data},p=()=>{var p,u;const j=a(),[b,f]=i.useState({}),{data:g,isLoading:h}=l({queryKey:["siteSettings"],queryFn:m});s.useEffect(()=>{g&&f(g)},[g]);const v=n({mutationFn:x,onSuccess:()=>{j.invalidateQueries({queryKey:["siteSettings"]}),alert("Settings updated successfully!")},onError:e=>{var t,i;alert(`Failed to update settings: ${(null==(i=null==(t=e.response)?void 0:t.data)?void 0:i.message)||e.message}`)}}),y=(e,t,i)=>{f(s=>({...s,[e]:{...s[e],[t]:i}}))};if(h)return e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"w-8 h-8 app-gradient rounded-full animate-pulse"}),e.jsx("span",{className:"ml-3 text-text-secondary",children:"Loading settings..."})]});const S=({label:t,section:i,field:s})=>{var a;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:t}),e.jsx("input",{type:"text",value:(null==(a=b[i])?void 0:a[s])||"",onChange:e=>y(i,s,e.target.value),className:"w-full"})]})},N=({label:t,section:i,field:s})=>{var a;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:t}),e.jsx("textarea",{value:(null==(a=b[i])?void 0:a[s])||"",onChange:e=>y(i,s,e.target.value),rows:3,className:"w-full"})]})};return e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Site Editor"}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Customize your site settings and content"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-10 h-10 app-gradient rounded-xl flex items-center justify-center",children:e.jsx(o,{size:20,className:"text-white"})})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),v.mutate(b)},className:"space-y-8",children:[e.jsx(d,{title:"Company Information",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(S,{label:"Company Name",section:"logos",field:"companyName"}),e.jsx(S,{label:"Favicon URL",section:"logos",field:"faviconUrl"}),e.jsx(S,{label:"Footer Logo URL",section:"logos",field:"footerLogoUrl"})]})}),e.jsx(d,{title:"Hero Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Hero Title",section:"heroSection",field:"title"}),e.jsx(N,{label:"Hero Subtitle",section:"heroSection",field:"subtitle"}),e.jsx(S,{label:"CTA Button Text",section:"heroSection",field:"ctaText"})]})}),e.jsx(d,{title:"Landscape Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Landscape Image"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:e=>{var i;const s=null==(i=e.target.files)?void 0:i[0];if(s){if(s.size>5242880)return void alert("Image must be less than 5MB");const e=new FormData;e.append("image",s),t.post("/upload/image",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{y("landscapeSection","imageUrl",e.data.imageUrl)}).catch(()=>alert("Failed to upload image"))}},className:"w-full p-3 border border-app-border rounded-2xl bg-app-surface"}),(null==(p=b.landscapeSection)?void 0:p.imageUrl)&&e.jsx("img",{src:b.landscapeSection.imageUrl,alt:"Landscape Preview",className:"mt-2 w-full h-48 object-cover rounded-lg"})]}),e.jsx(S,{label:"Title",section:"landscapeSection",field:"title"}),e.jsx(N,{label:"Description",section:"landscapeSection",field:"description"})]})}),e.jsx(d,{title:"About Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"About Title",section:"aboutSection",field:"title"}),e.jsx(N,{label:"About Content",section:"aboutSection",field:"content"}),e.jsx(S,{label:"Mission Statement",section:"aboutSection",field:"mission"})]})}),e.jsx(d,{title:"Features Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Features Title",section:"featuresSection",field:"title"}),e.jsx(N,{label:"Features Description",section:"featuresSection",field:"description"})]})}),e.jsx(d,{title:"Services Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Services Title",section:"servicesSection",field:"title"}),e.jsx(N,{label:"Services Description",section:"servicesSection",field:"description"})]})}),e.jsx(d,{title:"Pricing Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Pricing Title",section:"pricingSection",field:"title"}),e.jsx(N,{label:"Pricing Subtitle",section:"pricingSection",field:"subtitle"})]})}),e.jsx(d,{title:"Banner Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Banner Image"}),e.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:e=>{var i;const s=null==(i=e.target.files)?void 0:i[0];if(s){if(s.size>5242880)return void alert("Image must be less than 5MB");const e=new FormData;e.append("image",s),t.post("/upload/image",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{y("bannerSection","imageUrl",e.data.imageUrl)}).catch(()=>alert("Failed to upload image"))}},className:"w-full p-3 border border-app-border rounded-2xl bg-app-surface"}),(null==(u=b.bannerSection)?void 0:u.imageUrl)&&e.jsx("img",{src:b.bannerSection.imageUrl,alt:"Banner Preview",className:"mt-2 w-full h-48 object-contain bg-gray-100 rounded-lg"})]}),e.jsx(S,{label:"Alt Text",section:"bannerSection",field:"altText"}),e.jsx(S,{label:"Overlay Title",section:"bannerSection",field:"overlayText"}),e.jsx(N,{label:"Overlay Subtitle",section:"bannerSection",field:"overlaySubtext"})]})}),e.jsx(d,{title:"Contact Section",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{label:"Contact Title",section:"contact",field:"title"}),e.jsx(N,{label:"Contact Subtitle",section:"contact",field:"subtitle"}),e.jsx(S,{label:"Contact Email",section:"contact",field:"email"}),e.jsx(S,{label:"Contact Phone",section:"contact",field:"phone"})]})}),e.jsx(d,{title:"Footer Settings",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{label:"Footer Description",section:"footer",field:"description"}),e.jsx(S,{label:"Copyright Text",section:"footer",field:"copyrightText"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:v.isLoading,className:"btn-gradient px-8 py-3 rounded-2xl flex items-center gap-2 font-semibold disabled:opacity-50",children:[v.isLoading?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(r,{size:16}),v.isLoading?"Saving...":"Save Settings"]})})]})]})};export{p as default};
