import{c as e,j as s,b as a}from"./index-7df8bb8f.js";import{r}from"./vendor-83d6deea.js";import{m as t,w as d,a1 as l,V as i,af as n}from"./ui-88b07fc3.js";import"./router-225372b8.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";import"./query-c0dd8be7.js";const o=()=>{var o;const{user:c,setUser:m}=e(),[x,u]=r.useState({name:(null==c?void 0:c.name)||"",email:(null==c?void 0:c.email)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[p,j]=r.useState(!1),[h,f]=r.useState(""),b=e=>{u({...x,[e.target.name]:e.target.value})};return s.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 app-gradient rounded-2xl flex items-center justify-center text-white text-2xl font-bold",children:null==(o=null==c?void 0:c.name)?void 0:o.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Admin Profile"}),s.jsx("p",{className:"text-text-secondary",children:"Manage your admin account settings"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"app-surface rounded-3xl p-6 border border-app-border",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(d,{size:20,className:"text-brand-blue"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Account Info"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-text-secondary",children:"Role"}),s.jsx("p",{className:"font-medium text-text-primary",children:null==c?void 0:c.role})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-text-secondary",children:"User ID"}),s.jsx("p",{className:"font-mono text-sm text-text-primary",children:null==c?void 0:c._id})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-text-secondary",children:"Account Status"}),s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 app-surface rounded-3xl p-6 border border-app-border",children:[s.jsx("h3",{className:"font-semibold text-text-primary mb-6",children:"Update Profile"}),h&&s.jsx("div",{className:"p-4 rounded-2xl mb-6 "+(h.includes("success")?"bg-green-50 text-green-600 border border-green-200":"bg-red-50 text-red-600 border border-red-200"),children:h}),s.jsxs("form",{onSubmit:async e=>{var s,r;e.preventDefault(),j(!0),f("");try{const e={name:x.name,email:x.email};if(x.newPassword){if(x.newPassword!==x.confirmPassword)return f("New passwords do not match"),void j(!1);e.currentPassword=x.currentPassword,e.newPassword=x.newPassword}const{data:s}=await a.put("/auth/profile",e);m(s.data),f("Profile updated successfully!"),u(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(t){f((null==(r=null==(s=t.response)?void 0:s.data)?void 0:r.message)||"Failed to update profile")}finally{j(!1)}},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:[s.jsx(l,{size:16,className:"inline mr-2"}),"Full Name"]}),s.jsx("input",{type:"text",name:"name",value:x.name,onChange:b,required:!0,className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:[s.jsx(i,{size:16,className:"inline mr-2"}),"Email Address"]}),s.jsx("input",{type:"email",name:"email",value:x.email,onChange:b,required:!0,className:"w-full"})]})]}),s.jsx("hr",{className:"border-app-border"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-text-primary mb-4",children:"Change Password (Optional)"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Current Password"}),s.jsx("input",{type:"password",name:"currentPassword",value:x.currentPassword,onChange:b,className:"w-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"New Password"}),s.jsx("input",{type:"password",name:"newPassword",value:x.newPassword,onChange:b,className:"w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Confirm New Password"}),s.jsx("input",{type:"password",name:"confirmPassword",value:x.confirmPassword,onChange:b,className:"w-full"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:p,className:"btn-gradient px-8 py-3 rounded-2xl flex items-center gap-2 font-semibold disabled:opacity-50",children:[p?s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(n,{size:16}),p?"Updating...":"Update Profile"]})})]})]})]})]})};export{o as default};
