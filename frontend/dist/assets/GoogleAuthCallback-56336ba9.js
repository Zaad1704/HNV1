import{c as e,j as t,b as a}from"./index-7df8bb8f.js";import{r as s}from"./vendor-83d6deea.js";import{d as r,a as i}from"./router-225372b8.js";import{m as n,s as o,a2 as c}from"./ui-88b07fc3.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";import"./query-c0dd8be7.js";const l=()=>{const[l]=r(),d=i(),{login:u,logout:m}=e(),[x,g]=s.useState("loading"),[h,f]=s.useState("Finalizing login...");return s.useEffect(()=>{(async()=>{const e=l.get("token");if(l.get("error"))return g("error"),f("Google authentication failed. Please try again."),void setTimeout(()=>d("/login",{replace:!0}),3e3);if(e)try{const t=await a.get("/auth/me",{headers:{Authorization:`Bearer ${e}`}});let s;s=t.data.success&&t.data.data?t.data.data:t.data.user?t.data.user:t.data,u(e,s),g("success"),f("Login successful! Redirecting to dashboard..."),setTimeout(()=>d("/dashboard",{replace:!0}),1500)}catch(t){g("error"),f("Authentication failed. Please try again."),m(),setTimeout(()=>d("/login",{replace:!0}),3e3)}else g("error"),f("No authentication token received."),setTimeout(()=>d("/login",{replace:!0}),3e3)})()},[l,d,u,m]),t.jsx("div",{className:"min-h-screen bg-app-bg flex items-center justify-center p-4",children:t.jsxs(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center",children:[t.jsxs("div",{className:"w-20 h-20 mx-auto mb-6 flex items-center justify-center rounded-3xl",children:["loading"===x&&t.jsx("div",{className:"w-16 h-16 app-gradient rounded-full animate-pulse"}),"success"===x&&t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(o,{size:32,className:"text-green-600"})}),"error"===x&&t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:t.jsx(c,{size:32,className:"text-red-600"})})]}),t.jsxs("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:["loading"===x&&"Authenticating...","success"===x&&"Success!","error"===x&&"Authentication Failed"]}),t.jsx("p",{className:"text-text-secondary",children:h}),"loading"===x&&t.jsx("div",{className:"mt-6",children:t.jsx("div",{className:"w-8 h-8 border-4 border-brand-blue/30 border-t-brand-blue rounded-full animate-spin mx-auto"})})]})})};export{l as default};
