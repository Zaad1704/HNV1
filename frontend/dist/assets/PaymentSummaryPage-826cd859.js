import{j as t,b as e}from"./index-7df8bb8f.js";import{r}from"./vendor-83d6deea.js";import{c as a,a as d}from"./router-225372b8.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";import"./query-c0dd8be7.js";import"./ui-88b07fc3.js";const s=()=>{const{planId:s}=a();d();const[l,o]=r.useState(null),[n,i]=r.useState(!0),[c,x]=r.useState("");r.useEffect(()=>{(async()=>{if(!s)return x("No plan selected."),void i(!1);try{const t=(await e.get("/plans")).data.data.find(t=>t._id===s);t?o(t):x("Selected plan could not be found.")}catch(t){x("Failed to load plan details.")}finally{i(!1)}})()},[s]);return n?t.jsx("div",{className:"text-dark-text dark:text-dark-text-dark text-center p-8",children:"Loading Plan Details..."}):c?t.jsx("div",{className:"text-red-400 text-center p-8 dark:text-red-400",children:c}):l?t.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg text-dark-text dark:text-dark-text-dark flex justify-center items-center p-4 transition-colors duration-300",children:t.jsxs("div",{className:"w-full max-w-md bg-light-card dark:bg-dark-card p-8 rounded-2xl shadow-2xl border border-border-color dark:border-border-color-dark transition-all duration-200",children:[t.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Order Summary"}),t.jsx("p",{className:"text-light-text dark:text-light-text-dark text-center mb-6",children:"You are about to subscribe to the following plan:"}),t.jsxs("div",{className:"bg-light-bg dark:bg-dark-bg/50 p-6 rounded-lg mb-6 border border-border-color dark:border-border-color-dark transition-all duration-200",children:[t.jsx("h2",{className:"text-2xl font-bold text-brand-primary dark:text-brand-secondary",children:l.name}),t.jsxs("p",{className:"text-4xl font-extrabold text-dark-text dark:text-dark-text-dark mt-2",children:["$",(l.price/100).toFixed(2),t.jsxs("span",{className:"text-lg font-medium text-light-text dark:text-light-text-dark",children:[" / ",l.duration]})]}),t.jsx("ul",{className:"text-light-text dark:text-light-text-dark space-y-2 mt-4 text-sm",children:l.features.map(e=>t.jsxs("li",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 mr-2 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e]},e))})]}),t.jsx("button",{onClick:async()=>{i(!0),x("");try{const t=await e.post("/billing/create-checkout-session",{planId:s});t.data.redirectUrl&&(window.location.href=t.data.redirectUrl)}catch(t){x("Could not initiate payment session. Please try again later."),i(!1)}},disabled:n,className:"w-full py-3 bg-brand-primary font-semibold rounded-lg hover:bg-brand-secondary text-white transition-all duration-200 disabled:opacity-50",children:n?"Redirecting...":"Proceed to Secure Payment"}),t.jsx("p",{className:"text-xs text-light-text dark:text-light-text-dark mt-4 text-center",children:"You will be redirected to our secure payment partner, 2Checkout, to complete your purchase."})]})}):t.jsx("div",{className:"text-dark-text dark:text-dark-text-dark text-center p-8",children:"Plan not found."})};export{s as default};
