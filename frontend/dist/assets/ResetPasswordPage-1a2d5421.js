import{j as e,b as s}from"./index-7df8bb8f.js";import{r as t}from"./vendor-83d6deea.js";import{c as a,a as r,L as i}from"./router-225372b8.js";import{m as l,s as o,e as n,$ as d}from"./ui-88b07fc3.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";import"./query-c0dd8be7.js";const c=()=>{const{token:c}=a(),m=r(),[x,p]=t.useState({password:"",confirmPassword:""}),[u,b]=t.useState(!1),[f,h]=t.useState(!1),[w,j]=t.useState(""),y=e=>{p({...x,[e.target.name]:e.target.value})};return f?e.jsx("div",{className:"min-h-screen bg-app-bg flex items-center justify-center p-4",children:e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(o,{size:32,className:"text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-4",children:"Password Reset!"}),e.jsx("p",{className:"text-text-secondary mb-8",children:"Your password has been successfully reset. You'll be redirected to login shortly."}),e.jsxs(i,{to:"/login",className:"btn-gradient px-8 py-3 rounded-2xl inline-flex items-center gap-2",children:["Go to Login",e.jsx(n,{size:16})]})]})}):e.jsx("div",{className:"min-h-screen bg-app-bg flex items-center justify-center p-4",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 app-gradient rounded-3xl flex items-center justify-center mx-auto mb-6",children:e.jsx(d,{size:32,className:"text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-text-secondary",children:"Enter your new password below"})]}),e.jsxs("div",{className:"app-surface rounded-3xl p-8 border border-app-border shadow-app-lg",children:[w&&e.jsx(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-2xl text-center text-sm mb-6",children:w}),e.jsxs("form",{onSubmit:async e=>{var t,a;if(e.preventDefault(),x.password===x.confirmPassword)if(x.password.length<6)j("Password must be at least 6 characters long");else{b(!0),j("");try{await s.post(`/auth/reset-password/${c}`,{password:x.password});h(!0),setTimeout(()=>m("/login"),3e3)}catch(r){j((null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.message)||r.message||"Failed to reset password. The link may be expired.")}finally{b(!1)}}else j("Passwords do not match")},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-text-muted"}),e.jsx("input",{type:"password",name:"password",required:!0,value:x.password,onChange:y,className:"w-full pl-12 pr-4 py-3 rounded-2xl border border-app-border bg-app-surface text-text-primary focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 transition-all",placeholder:"Enter new password",minLength:6})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{size:20,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-text-muted"}),e.jsx("input",{type:"password",name:"confirmPassword",required:!0,value:x.confirmPassword,onChange:y,className:"w-full pl-12 pr-4 py-3 rounded-2xl border border-app-border bg-app-surface text-text-primary focus:border-brand-blue focus:ring-4 focus:ring-brand-blue/10 transition-all",placeholder:"Confirm new password",minLength:6})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full btn-gradient py-4 text-lg font-semibold rounded-2xl flex items-center justify-center gap-2 disabled:opacity-50",children:u?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["Reset Password",e.jsx(n,{size:20})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(i,{to:"/login",className:"text-text-secondary hover:text-text-primary transition-colors",children:"Back to Login"})})]})]})})};export{c as default};
