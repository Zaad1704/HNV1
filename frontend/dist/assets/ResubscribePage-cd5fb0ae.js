import{c as r,j as e,b as t}from"./index-7df8bb8f.js";import{a,d as o,L as d}from"./router-225372b8.js";import{u as s,c as i}from"./query-c0dd8be7.js";import{a3 as n,a4 as l,s as c,k as x}from"./ui-88b07fc3.js";import"./vendor-83d6deea.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";const b=async()=>{const{data:r}=await t.get("/billing");return r.data},g=()=>{var g,u,m,h,k;const p=a(),[f]=o(),j=f.get("status")||"inactive",{logout:v}=r(),{data:y,isLoading:N,isError:w,error:I}=s({queryKey:["userBillingInfoResubscribe"],queryFn:b,retry:!1}),P=i({mutationFn:r=>(async r=>{const{data:e}=await t.post("/billing/create-checkout-session",{planId:r});return e.redirectUrl})(r),onSuccess:r=>{window.location.href=r},onError:r=>{var e,t;alert(`Failed to initiate checkout: ${(null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Please try again."}`)}}),L=()=>{v(),p("/login",{replace:!0})};return N?e.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center text-dark-text dark:text-dark-text-dark",children:"Loading subscription details..."}):w||!y?e.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg text-dark-text dark:text-dark-text-dark flex justify-center items-center p-4 transition-colors duration-300",children:e.jsxs("div",{className:"text-center bg-light-card dark:bg-dark-card p-10 rounded-2xl shadow-xl border border-border-color dark:border-border-color-dark max-w-lg transition-all duration-200",children:[e.jsx(n,{className:"mx-auto text-brand-orange w-16 h-16 mb-4"})," ",e.jsx("h1",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-dark mb-4",children:"Subscription Issue"}),e.jsx("p",{className:"text-light-text dark:text-light-text-dark text-lg mb-8",children:"We could not find an active or restorable subscription for your account. This can happen if the subscription has been removed or if your session has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(d,{to:"/pricing",className:"px-6 py-3 bg-brand-primary font-semibold text-white rounded-lg hover:bg-brand-secondary transition-colors duration-200",children:"View Pricing Plans"}),e.jsxs("button",{onClick:L,className:"px-6 py-3 bg-light-bg dark:bg-dark-bg/50 border border-border-color dark:border-border-color-dark font-semibold rounded-lg hover:bg-border-color dark:hover:bg-dark-bg/70 transition-colors flex items-center gap-2 mx-auto sm:mx-0",children:[e.jsx(l,{size:20})," Return to Login"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg text-dark-text dark:text-dark-text-dark flex justify-center items-center p-4 transition-colors duration-300",children:e.jsxs("div",{className:"w-full max-w-md bg-light-card dark:bg-dark-card p-8 rounded-2xl shadow-2xl border border-border-color dark:border-border-color-dark transition-all duration-200",children:[e.jsxs("h1",{className:"text-3xl font-bold text-center mb-2",children:["Your Account is ",j.replace("_"," ")]}),e.jsx("p",{className:"text-light-text dark:text-light-text-dark text-center mb-6",children:"To regain full access, please reactivate your subscription."}),e.jsxs("div",{className:"bg-light-bg dark:bg-dark-bg/50 p-6 rounded-lg mb-6 border border-border-color dark:border-border-color-dark transition-all duration-200",children:[e.jsxs("h2",{className:"text-2xl font-bold text-brand-primary dark:text-brand-secondary",children:[(null==(g=y.planId)?void 0:g.name)||"Previous Plan"," Plan"]}),e.jsxs("p",{className:"text-lg font-mono text-light-text dark:text-light-text-dark mt-2",children:["$",(null==(m=(null==(u=y.planId)?void 0:u.price)/100)?void 0:m.toFixed(2))||"0.00"," / ",(null==(h=y.planId)?void 0:h.duration)||"N/A"]}),e.jsx("ul",{className:"text-light-text dark:text-light-text-dark space-y-2 mt-4 text-sm",children:((null==(k=y.planId)?void 0:k.features)||[]).map(r=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(c,{className:"w-4 h-4 mr-2 text-brand-primary dark:text-brand-secondary"}),r]},r))})]}),e.jsxs("button",{onClick:()=>{var r;(null==(r=null==y?void 0:y.planId)?void 0:r._id)?P.mutate(y.planId._id):(alert("Could not retrieve your previous plan. Please choose a new plan from our pricing page."),p("/pricing"))},disabled:P.isLoading,className:"w-full py-3 bg-brand-primary text-white font-semibold rounded-lg hover:bg-brand-secondary transition-all duration-200 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(x,{size:20})," ",P.isLoading?"Redirecting...":"Reactivate Subscription"]}),e.jsxs("button",{onClick:L,className:"w-full mt-4 py-3 border border-border-color dark:border-border-color-dark text-light-text dark:text-light-text-dark font-semibold rounded-lg hover:bg-border-color dark:hover:bg-dark-bg/70 transition-colors flex items-center justify-center gap-2",children:[e.jsx(l,{size:20})," Cancel and Go Back"]})]})})};export{g as default};
