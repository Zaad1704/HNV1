import{j as e,b as t}from"./index-7df8bb8f.js";import{a as r,u as a,c as s}from"./query-c0dd8be7.js";import{m as d,aj as o,X as i,g as l}from"./ui-88b07fc3.js";import"./vendor-83d6deea.js";import"./router-225372b8.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";const n=async()=>{const{data:e}=await t.get("/edit-requests");return e.data},x=()=>{const x=r(),{data:c=[],isLoading:u,isError:m}=a({queryKey:["approvalRequests"],queryFn:n}),p=s({mutationFn:e=>t.put(`/edit-requests/${e}/approve`),onSuccess:()=>{x.invalidateQueries({queryKey:["approvalRequests"]}),alert("Request approved successfully.")},onError:e=>{var t,r;return alert((null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.message)||"Failed to approve request.")}}),k=s({mutationFn:e=>t.put(`/edit-requests/${e}/reject`),onSuccess:()=>{x.invalidateQueries({queryKey:["approvalRequests"]})},onError:e=>{var t,r;return alert((null==(r=null==(t=e.response)?void 0:t.data)?void 0:r.message)||"Failed to reject request.")}});if(u)return e.jsx("div",{className:"text-center p-8 text-dark-text dark:text-dark-text-dark",children:"Loading approval requests..."});if(m)return e.jsx("div",{className:"text-center p-8 text-red-400 dark:text-red-400",children:"Failed to load requests."});return e.jsxs(d.div,{initial:"initial",animate:"in",exit:"out",variants:{initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},transition:{duration:.4},className:"text-dark-text dark:text-dark-text-dark",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Pending Approval Requests"}),0===c.length?e.jsxs("div",{className:"text-center py-16 bg-light-card rounded-xl border-2 border-dashed border-border-color dark:bg-dark-card dark:border-border-color-dark",children:[e.jsx(o,{size:48,className:"mx-auto text-light-text mb-4 dark:text-light-text-dark"}),e.jsx("h3",{className:"text-xl font-semibold text-dark-text dark:text-dark-text-dark",children:"No Pending Requests"}),e.jsx("p",{className:"text-light-text mt-2 dark:text-light-text-dark",children:"There are currently no pending edit requests from your agents."})]}):e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsxs("div",{className:"bg-light-card p-4 rounded-xl border border-border-color shadow-sm flex flex-col sm:flex-row justify-between items-start gap-4 dark:bg-dark-card dark:border-border-color-dark",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("p",{className:"font-semibold text-dark-text dark:text-dark-text-dark",children:[e.jsx("span",{className:"font-bold text-brand-primary",children:t.requester.name})," is requesting to edit a cash flow record:"]}),e.jsxs("p",{className:"text-sm text-light-text mt-1 dark:text-light-text-dark",children:["Amount: ",e.jsxs("span",{className:"font-semibold text-dark-text dark:text-dark-text-dark",children:["$",t.resourceId.amount.toFixed(2)]})," | Date: ",e.jsx("span",{className:"font-semibold text-dark-text dark:text-dark-text-dark",children:new Date(t.resourceId.transactionDate).toLocaleDateString()})]}),e.jsxs("div",{className:"mt-2 p-3 bg-light-bg border border-dashed border-border-color rounded-md dark:bg-dark-bg/50 dark:border-border-color-dark",children:[e.jsx("p",{className:"text-sm text-light-text font-semibold dark:text-light-text-dark",children:"Reason:"}),e.jsx("p",{className:"text-sm text-dark-text dark:text-dark-text-dark",children:t.reason})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>k.mutate(t._id),disabled:k.isLoading,className:"w-1/2 sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-red-500/20 text-red-300 font-bold rounded-lg hover:bg-red-500/30",children:[e.jsx(i,{size:16})," Reject"]}),e.jsxs("button",{onClick:()=>p.mutate(t._id),disabled:p.isLoading,className:"w-1/2 sm:w-auto flex items-center justify-center gap-2 px-4 py-2 bg-green-500/20 text-green-300 font-bold rounded-lg hover:bg-green-500/30",children:[e.jsx(l,{size:16})," Approve"]})]})]},t._id))})]})};export{x as default};
