import{c as e,d as s,e as a,a as r,j as t,b as l}from"./index-7df8bb8f.js";import{r as n}from"./vendor-83d6deea.js";import{m as d,a1 as i,V as o,af as c,ag as m,G as x,B as p,ad as u,D as b}from"./ui-88b07fc3.js";import"./router-225372b8.js";import"./i18n-eaa6a7d3.js";import"./utils-2ffb253a.js";import"./query-c0dd8be7.js";const h=()=>{var h;const{user:j,setUser:f}=e(),{theme:g,toggleTheme:N}=s(),{lang:w,setLang:y,getNextToggleLanguage:v}=a();r();const[P,k]=n.useState(!1),[z,C]=n.useState(""),[D,S]=n.useState({name:(null==j?void 0:j.name)||"",email:(null==j?void 0:j.email)||"",organizationName:(null==(h=null==j?void 0:j.organizationId)?void 0:h.name)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[A,L]=n.useState(null),q=e=>{S({...D,[e.target.name]:e.target.value})};return t.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Settings"}),t.jsx("p",{className:"text-text-secondary mt-1",children:"Manage your account and preferences"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 app-surface rounded-3xl p-6 border border-app-border",children:[t.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-6",children:"Profile Information"}),z&&t.jsx("div",{className:"p-4 rounded-2xl mb-6 "+(z.includes("success")?"bg-green-50 text-green-600 border border-green-200":"bg-red-50 text-red-600 border border-red-200"),children:z}),t.jsxs("form",{onSubmit:async e=>{var s,a;e.preventDefault(),k(!0),C("");try{const e=new FormData;if(e.append("name",D.name),e.append("email",D.email),D.organizationName&&e.append("organizationName",D.organizationName),A&&e.append("profileImage",A),D.newPassword){if(D.newPassword!==D.confirmPassword)return C("New passwords do not match"),void k(!1);e.append("currentPassword",D.currentPassword),e.append("newPassword",D.newPassword)}const{data:s}=await l.put("/auth/profile",e);f(s.data),C("Profile updated successfully!"),S(e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(r){C((null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.message)||"Failed to update profile")}finally{k(!1)}},className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:[t.jsx(i,{size:16,className:"inline mr-2"}),"Full Name"]}),t.jsx("input",{type:"text",name:"name",value:D.name,onChange:q,required:!0,className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:[t.jsx(o,{size:16,className:"inline mr-2"}),"Email Address"]}),t.jsx("input",{type:"email",name:"email",value:D.email,onChange:q,required:!0,className:"w-full"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Organization Name"}),t.jsx("input",{type:"text",name:"organizationName",value:D.organizationName,onChange:q,placeholder:"Enter organization name",className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Profile Picture / Logo"}),t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var s;return L((null==(s=e.target.files)?void 0:s[0])||null)},className:"w-full p-3 border border-app-border rounded-2xl bg-app-surface"})]}),t.jsx("hr",{className:"border-app-border"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-text-primary mb-4",children:"Change Password (Optional)"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Current Password"}),t.jsx("input",{type:"password",name:"currentPassword",value:D.currentPassword,onChange:q,className:"w-full"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"New Password"}),t.jsx("input",{type:"password",name:"newPassword",value:D.newPassword,onChange:q,className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Confirm New Password"}),t.jsx("input",{type:"password",name:"confirmPassword",value:D.confirmPassword,onChange:q,className:"w-full"})]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:P,className:"btn-gradient px-8 py-3 rounded-2xl flex items-center gap-2 font-semibold disabled:opacity-50",children:[P?t.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):t.jsx(c,{size:16}),P?"Updating...":"Update Profile"]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"app-surface rounded-3xl p-6 border border-app-border",children:[t.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[t.jsx(m,{size:20}),"Appearance"]}),t.jsxs("button",{onClick:N,className:"w-full flex items-center justify-between p-4 bg-app-bg rounded-2xl hover:bg-app-border transition-colors",children:[t.jsx("span",{className:"text-text-primary",children:"Theme"}),t.jsx("span",{className:"text-text-secondary capitalize",children:g})]})]}),t.jsxs("div",{className:"app-surface rounded-3xl p-6 border border-app-border",children:[t.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[t.jsx(x,{size:20}),"Language"]}),t.jsxs("button",{onClick:()=>y(v().code),className:"w-full flex items-center justify-between p-4 bg-app-bg rounded-2xl hover:bg-app-border transition-colors",children:[t.jsx("span",{className:"text-text-primary",children:"Language"}),t.jsx("span",{className:"text-text-secondary",children:v().name})]})]}),t.jsxs("div",{className:"app-surface rounded-3xl p-6 border border-app-border",children:[t.jsxs("h3",{className:"font-semibold text-text-primary mb-4 flex items-center gap-2",children:[t.jsx(p,{size:20}),"Notifications"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-text-primary",children:"Email Notifications"}),t.jsx("input",{type:"checkbox",className:"rounded",defaultChecked:!0})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-text-primary",children:"Push Notifications"}),t.jsx("input",{type:"checkbox",className:"rounded"})]})]})]}),t.jsxs("div",{className:"app-surface rounded-3xl p-6 border border-red-200 dark:border-red-800",children:[t.jsxs("h3",{className:"font-semibold text-red-600 mb-4 flex items-center gap-2",children:[t.jsx(u,{size:20}),"Danger Zone"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{className:"w-full flex items-center justify-center gap-2 p-3 bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400 rounded-xl hover:bg-yellow-200 dark:hover:bg-yellow-900/40 transition-colors",children:[t.jsx(b,{size:16}),"Download All Data"]}),t.jsxs("button",{className:"w-full flex items-center justify-center gap-2 p-3 bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400 rounded-xl hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors",children:[t.jsx(u,{size:16}),"Delete Account"]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Account deletion is permanent and cannot be undone. Download your data first."})]})]})]})]})};export{h as default};
