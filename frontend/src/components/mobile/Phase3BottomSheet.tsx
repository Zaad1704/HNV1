import React, { useState, useEffect, useCallback } from 'react';
import { X } from 'lucide-react';\n\ninterface Phase3BottomSheetProps {\n  isOpen: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n  title?: string;\n  height?: 'auto' | 'half' | 'full';\n  showHandle?: boolean;\n  className?: string;\n}\n\nconst Phase3BottomSheet: React.FC<Phase3BottomSheetProps> = ({\n  isOpen,\n  onClose,\n  children,\n  title,\n  height = 'auto',\n  showHandle = true,\n  className = ''\n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setIsAnimating(true);\n      document.body.style.overflow = 'hidden';\n      \n      // Add animation delay\n      setTimeout(() => setIsAnimating(false), 300);\n    } else {\n      setIsAnimating(true);\n      document.body.style.overflow = 'unset';\n      \n      // Hide after animation\n      setTimeout(() => {\n        setIsVisible(false);\n        setIsAnimating(false);\n      }, 300);\n    }\n    \n    return () => {\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen]);\n\n  const handleBackdropClick = useCallback((e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  }, [onClose]);\n\n  const getHeightClass = () => {\n    switch (height) {\n      case 'half': return 'h-1/2';\n      case 'full': return 'h-full';\n      default: return 'max-h-[80vh]';\n    }\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className={`phase3-bottom-sheet ${className}`}>\n      {/* Backdrop */}\n      <div \n        className={`phase3-bottom-sheet-backdrop ${\n          isOpen ? 'opacity-100' : 'opacity-0'\n        }`}\n        onClick={handleBackdropClick}\n      />\n      \n      {/* Bottom Sheet Content */}\n      <div \n        className={`phase3-bottom-sheet-content ${\n          isOpen ? 'translate-y-0' : 'translate-y-full'\n        } ${getHeightClass()}`}\n      >\n        {/* Handle */}\n        {showHandle && (\n          <div className=\"phase3-bottom-sheet-handle\" />\n        )}\n        \n        {/* Header */}\n        {title && (\n          <div className=\"phase3-bottom-sheet-header\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">{title}</h3>\n            <button\n              onClick={onClose}\n              className=\"phase3-touch-btn-icon\"\n              aria-label=\"Close\"\n            >\n              <X size={20} />\n            </button>\n          </div>\n        )}\n        \n        {/* Body */}\n        <div className=\"phase3-bottom-sheet-body\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Phase3BottomSheet;